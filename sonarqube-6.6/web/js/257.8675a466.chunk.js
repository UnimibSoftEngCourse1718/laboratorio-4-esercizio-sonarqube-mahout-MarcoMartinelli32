webpackJsonp([257],{2137:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(11),i=n(717),r=n(2550),o=n(12),u=function(t){return n.i(o.getQualityGatesAppState)(t)},s=function(t){return{updateStore:function(e){return t(n.i(i.u)(e))},addQualityGate:function(e){return t(n.i(i.v)(e))},deleteQualityGate:function(e){return t(n.i(i.m)(e))}}};e.default=n.i(a.connect)(u,s)(r.a)},2153:function(t,e,n){"use strict";function a(){return n.i(b.getJSON)("/api/qualitygates/app").catch(q.a)}function i(){return n.i(b.getJSON)("/api/qualitygates/list").then(function(t){return t.qualitygates.map(function(e){return E({},e,{id:e.id,isDefault:e.id===t.default})})},q.a)}function r(t){return n.i(b.getJSON)("/api/qualitygates/show",{id:t}).catch(q.a)}function o(t){return n.i(b.postJSON)("/api/qualitygates/create",{name:t})}function u(t){return n.i(b.post)("/api/qualitygates/destroy",{id:t})}function s(t,e){return n.i(b.post)("/api/qualitygates/rename",{id:t,name:e})}function l(t,e){return n.i(b.postJSON)("/api/qualitygates/copy",{id:t,name:e})}function c(t){return n.i(b.post)("/api/qualitygates/set_as_default",{id:t}).catch(q.a)}function p(t){return n.i(b.post)("/api/qualitygates/unset_default",{id:t}).catch(q.a)}function d(t,e){return n.i(b.postJSON)("/api/qualitygates/create_condition",E({},e,{gateId:t}))}function f(t){return n.i(b.postJSON)("/api/qualitygates/update_condition",t)}function m(t){return n.i(b.post)("/api/qualitygates/delete_condition",{id:t})}function h(t){return n.i(b.getJSON)("/api/qualitygates/get_by_project",{project:t}).then(function(t){return t.qualityGate&&{id:t.qualityGate.id,isDefault:t.qualityGate.default,name:t.qualityGate.name}})}function y(t,e){return n.i(b.post)("/api/qualitygates/select",{gateId:t,projectKey:e}).catch(q.a)}function g(t,e){return n.i(b.post)("/api/qualitygates/deselect",{gateId:t,projectKey:e}).catch(q.a)}function v(t){return n.i(b.getJSON)("/api/qualitygates/application_status",{application:t})}e.o=a,e.c=i,e.f=r,e.p=o,e.l=u,e.n=s,e.m=l,e.h=c,e.g=p,e.i=d,e.j=f,e.k=m,e.d=h,e.a=y,e.b=g,e.e=v;var b=n(22),q=n(61),E=this&&this.__assign||Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t}},2158:function(t,e,n){"use strict";var a=n(0),i=(n.n(a),n(4)),r=(n.n(i),this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}()),o=function(t){function e(e){var a=t.call(this,e)||this;return a.getPosition=function(){var t=a.container&&a.container.getBoundingClientRect();return t?{top:window.pageYOffset+t.top,left:window.pageXOffset+t.left}:{top:0,left:0}},a.debouncedOnResize=n.i(i.debounce)(function(){return a.forceUpdate()},250),a}return r(e,t),e.prototype.componentDidMount=function(){this.forceUpdate(),window.addEventListener("resize",this.debouncedOnResize)},e.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.debouncedOnResize)},e.prototype.render=function(){var t=this;return a.createElement("div",{className:this.props.className,ref:function(e){return t.container=e}},this.props.children(this.getPosition()))},e}(a.PureComponent);e.a=o},2194:function(t,e,n){function a(t){return t&&(t.__esModule?t.default:t)}var i=n(5);t.exports=(i.default||i).template({1:function(t,e,i,r){return(0,this.escapeExpression)(a(n(1)).call(t,"save",{name:"t",hash:{},data:r}))},3:function(t,e,i,r){return(0,this.escapeExpression)(a(n(1)).call(t,"copy",{name:"t",hash:{},data:r}))},5:function(t,e,i,r){return(0,this.escapeExpression)(a(n(1)).call(t,"create",{name:"t",hash:{},data:r}))},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,i,r){var o,u=this.escapeExpression,s=this.lambda,l='<form id="quality-gate-form">\n  <div class="modal-head">\n    <h2>'+u(a(n(1)).call(t,"quality_gates",null!=t?t.method:t,{name:"t",hash:{},data:r}))+'</h2>\n  </div>\n  <div class="modal-body">\n    <div class="js-modal-messages"></div>\n    <div class="modal-field">\n      <label for="quality-gate-form-name">'+u(a(n(1)).call(t,"name",{name:"t",hash:{},data:r}))+' <em class="mandatory">*</em></label>\n      <input id="quality-gate-form-name" type="text" size="50" maxlength="100" value="'+u(s(null!=t?t.name:t,t))+'" required>\n    </div>\n  </div>\n  <div class="modal-foot">\n    <button id="quality-gate-form-submit">\n      ';return o=a(n(14)).call(t,null!=t?t.method:t,"rename",{name:"eq",hash:{},fn:this.program(1,r),inverse:this.noop,data:r}),null!=o&&(l+=o),l+="\n      ",o=a(n(14)).call(t,null!=t?t.method:t,"copy",{name:"eq",hash:{},fn:this.program(3,r),inverse:this.noop,data:r}),null!=o&&(l+=o),l+="\n      ",o=a(n(14)).call(t,null!=t?t.method:t,"create",{name:"eq",hash:{},fn:this.program(5,r),inverse:this.noop,data:r}),null!=o&&(l+=o),l+'\n    </button>\n    <a id="quality-gate-form-cancel" href="#" class="js-modal-close">'+u(a(n(1)).call(t,"cancel",{name:"t",hash:{},data:r}))+"</a>\n  </div>\n</form>\n"},useData:!0})},2547:function(t,e,n){"use strict";function a(t){var e=t.organization,a=t.qualityGates;return r.a.createElement("div",{className:"list-group"},a.map(function(t){return r.a.createElement(o.Link,{key:t.id,to:n.i(s.n)(t.id,e&&e.key),activeClassName:"active",className:"list-group-item","data-id":t.id},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{className:"text-top"},t.name),r.a.createElement("td",{className:"text-top thin nowrap spacer-left"},t.isDefault&&r.a.createElement("span",{className:"badge pull-right"},n.i(u.translate)("default")))))))}))}e.a=a;var i=n(0),r=n.n(i),o=n(10),u=n(2),s=n(41)},2548:function(t,e,n){"use strict";function a(t){function e(t){t.preventDefault(),new o.a({onAdd:i}).render()}var a=t.canEdit,i=t.onAdd;return r.a.createElement("header",{className:"page-header"},r.a.createElement("h1",{className:"page-title"},n.i(u.translate)("quality_gates.page")),a&&r.a.createElement("div",{className:"page-actions"},r.a.createElement("div",{className:"button-group"},r.a.createElement("button",{id:"quality-gate-add",onClick:e},n.i(u.translate)("create")))))}e.a=a;var i=n(0),r=n.n(i),o=n(2553),u=n(2)},2550:function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=n(0),u=n.n(o),s=n(6),l=n.n(s),c=n(30),p=n.n(c),d=n(2548),f=n(2547),m=n(2158),h=n(2153),y=n(2),g=n(41),v=n(2714),b=(n.n(v),function(){function t(t,e){var n=[],a=!0,i=!1,r=void 0;try{for(var o,u=t[Symbol.iterator]();!(a=(o=u.next()).done)&&(n.push(o.value),!e||n.length!==e);a=!0);}catch(t){i=!0,r=t}finally{try{!a&&u.return&&u.return()}finally{if(i)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()),q=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),E=function(t){function e(){var t,n,r,o;a(this,e);for(var u=arguments.length,s=Array(u),l=0;l<u;l++)s[l]=arguments[l];return n=r=i(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(s))),r.state={},o=n,i(r,o)}return r(e,t),q(e,[{key:"componentDidMount",value:function(){this.fetchQualityGates()}},{key:"fetchQualityGates",value:function(){var t=this;Promise.all([n.i(h.o)(),n.i(h.c)()]).then(function(e){var a=b(e,2),i=a[0],r=a[1],o=t.props,u=o.organization;(0,o.updateStore)(Object.assign({},i,{qualityGates:r})),r&&1===r.length&&!i.edit&&t.context.router.replace(n.i(g.n)(r[0].id,u&&u.key))})}},{key:"handleAdd",value:function(t){var e=this.props,a=e.addQualityGate,i=e.organization,r=this.context.router;a(t),r.push(n.i(g.n)(t.id,i&&i.key))}},{key:"render",value:function(){var t=this,e=this.props,a=e.children,i=e.qualityGates,r=e.edit,o=e.organization,s=n.i(y.translate)("quality_gates.page"),l=u.a.createElement(f.a,{organization:o,qualityGates:i});return u.a.createElement("div",{id:"quality-gates-page",className:"layout-page"},u.a.createElement(p.a,{defaultTitle:s,titleTemplate:"%s - "+s}),u.a.createElement(m.a,{className:"layout-page-side-outer"},function(e){var n=e.top;return u.a.createElement("div",{className:"layout-page-side",style:{top:n}},u.a.createElement("div",{className:"layout-page-side-inner"},u.a.createElement("div",{className:"layout-page-filters"},u.a.createElement(d.a,{canEdit:r,onAdd:t.handleAdd.bind(t)}),i&&l)))}),null!=i&&u.a.Children.map(a,function(t){return u.a.cloneElement(t,{organization:o})}))}}]),e}(o.Component);E.contextTypes={router:l.a.object.isRequired},e.a=E},2553:function(t,e,n){"use strict";var a=n(43),i=n(2194),r=n.n(i),o=n(2153),u=n(45);e.a=a.a.extend({template:r.a,onFormSubmit:function(){a.a.prototype.onFormSubmit.apply(this,arguments),this.disableForm(),this.sendRequest()},sendRequest:function(){var t=this,e=this.$("#quality-gate-form-name").val();n.i(o.p)(e).then(function(e){t.destroy(),t.options.onAdd(e)},function(e){t.enableForm(),n.i(u.a)(e).then(function(e){return t.showErrors([{msg:e}])})})},serializeData:function(){return{method:"create"}}})},2655:function(t,e,n){e=t.exports=n(27)(void 0),e.push([t.i,".quality-gate-section {\n  max-width: 1440px;\n}\n\n.quality-gate-section + .quality-gate-section {\n  margin-top: 10px;\n  padding-top: 20px;\n}\n",""])},2714:function(t,e,n){var a=n(2655);"string"==typeof a&&(a=[[t.i,a,""]]);var i={};i.transform=void 0;n(28)(a,i);a.locals&&(t.exports=a.locals)}});
//# sourceMappingURL=257.8675a466.chunk.js.map